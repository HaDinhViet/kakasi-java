#! /bin/sh

# $Id: mkkanwa_j,v 1.3 2003/01/01 08:18:38 kawao Exp $
#
# KAKASI/JAVA
#  Copyright (C) 2002-2003  KAWAO, Tomoyuki (kawao@kawao.com)
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

if [ -f "$HOME/.kakasirc" ] ; then 
    . "$HOME/.kakasirc"
fi

cygwin=false
case "`uname`" in
CYGWIN*) cygwin=true;;
esac

if $cygwin; then
    [ -n "$JAVA_HOME" ] && JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
    [ -n "$KAKASI_HOME" ] && KAKASI_HOME=`cygpath --unix "$KAKASI_HOME"`
fi

if [ -z "$JAVACMD" ] ; then 
    if [ -n "$JAVA_HOME"  ] ; then
        if [ -x "$JAVA_HOME/jre/sh/java" ] ; then 
            JAVACMD="$JAVA_HOME/jre/sh/java"
        else
            JAVACMD="$JAVA_HOME/bin/java"
        fi
    else
        JAVACMD=java
    fi
fi

if [ -z "$KAKASI_HOME" ] ; then
    PRG="$0"
    progname=`basename "$0"`
    saveddir=`pwd`
    cd `dirname "$PRG"`
    while [ -h "$PRG" ] ; do
        ls=`ls -ld "$PRG"`
        link=`expr "$ls" : '.*-> \(.*\)$'`
        if expr "$link" : '.*/.*' > /dev/null; then
            PRG="$link"
        else
            PRG=`dirname "$PRG"`"/$link"
        fi
    done
    KAKASI_HOME=`dirname "$PRG"`/..
    cd "$saveddir"
    KAKASI_HOME=`cd "$KAKASI_HOME" && pwd`
fi

CLASSPATH="$KAKASI_HOME"/lib/kakasi.jar

if $cygwin; then
    JAVA_HOME=`cygpath --path --windows "$JAVA_HOME"`
    KAKASI_HOME=`cygpath --path --windows "$KAKASI_HOME"`
    CLASSPATH=`cygpath --path --windows "$CLASSPATH"`
fi

"$JAVACMD" -classpath "$CLASSPATH" -Dkakasi.home="$KAKASI_HOME" $JAVA_OPTS com.kawao.kakasi.KanwaDictionary $MKKANWA_ARGS "$@"
